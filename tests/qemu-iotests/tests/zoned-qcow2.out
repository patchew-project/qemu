QA output created by zoned-qcow2

=== Initial image setup ===

Formatting 'zbc.qcow2', fmt=qcow2 cluster_size=65536 extended_l2=off compression_type=zlib zone_model=1 zone_size=67108864 zone_capacity=67108864 nr_conv_zones=0 max_append_sectors=131072 max_active_zones=0 max_open_zones=0 size=805306368 lazy_refcounts=off refcount_bits=16

=== Testing a qcow2 img with zoned format ===

case 1: test if one zone operation works
(1) report zones[0]:
start: 0x0, len 0x20000, cap 0x20000, wptr 0x0, zcond:1, [type: 2]

report zones[0~9]:
start: 0x0, len 0x20000, cap 0x20000, wptr 0x0, zcond:1, [type: 2]
start: 0x20000, len 0x20000, cap 0x20000, wptr 0x20000, zcond:1, [type: 2]
start: 0x40000, len 0x20000, cap 0x20000, wptr 0x40000, zcond:1, [type: 2]
start: 0x60000, len 0x20000, cap 0x20000, wptr 0x60000, zcond:1, [type: 2]
start: 0x80000, len 0x20000, cap 0x20000, wptr 0x80000, zcond:1, [type: 2]
start: 0xa0000, len 0x20000, cap 0x20000, wptr 0xa0000, zcond:1, [type: 2]
start: 0xc0000, len 0x20000, cap 0x20000, wptr 0xc0000, zcond:1, [type: 2]
start: 0xe0000, len 0x20000, cap 0x20000, wptr 0xe0000, zcond:1, [type: 2]
start: 0x100000, len 0x20000, cap 0x20000, wptr 0x100000, zcond:1, [type: 2]
start: 0x120000, len 0x20000, cap 0x20000, wptr 0x120000, zcond:1, [type: 2]

report the last zone:
start: 0x160000, len 0x20000, cap 0x20000, wptr 0x160000, zcond:1, [type: 2]


open zones[0]:
start: 0x0, len 0x20000, cap 0x20000, wptr 0x0, zcond:3, [type: 2]

open zones[1]
start: 0x20000, len 0x20000, cap 0x20000, wptr 0x20000, zcond:3, [type: 2]

open the last zone
start: 0x160000, len 0x20000, cap 0x20000, wptr 0x160000, zcond:3, [type: 2]


close zones[0]
start: 0x0, len 0x20000, cap 0x20000, wptr 0x0, zcond:4, [type: 2]

close the last zone
zone close failed: Input/output error
qemu-io: offset 268167020544 is equal to or greater than thedevice capacity 805306368
zone report failed: Invalid argument


(4) finish zones[1]
start: 0x20000, len 0x20000, cap 0x20000, wptr 0x40000, zcond:14, [type: 2]


(5) reset zones[1]
start: 0x20000, len 0x20000, cap 0x20000, wptr 0x20000, zcond:1, [type: 2]


(6) append write with (4k, 8k) data
start: 0x0, len 0x20000, cap 0x20000, wptr 0x0, zcond:4, [type: 2]
start: 0x20000, len 0x20000, cap 0x20000, wptr 0x20000, zcond:1, [type: 2]
start: 0x40000, len 0x20000, cap 0x20000, wptr 0x40000, zcond:1, [type: 2]
start: 0x60000, len 0x20000, cap 0x20000, wptr 0x60000, zcond:1, [type: 2]
start: 0x80000, len 0x20000, cap 0x20000, wptr 0x80000, zcond:1, [type: 2]
start: 0xa0000, len 0x20000, cap 0x20000, wptr 0xa0000, zcond:1, [type: 2]
start: 0xc0000, len 0x20000, cap 0x20000, wptr 0xc0000, zcond:1, [type: 2]
start: 0xe0000, len 0x20000, cap 0x20000, wptr 0xe0000, zcond:1, [type: 2]
start: 0x100000, len 0x20000, cap 0x20000, wptr 0x100000, zcond:1, [type: 2]
start: 0x120000, len 0x20000, cap 0x20000, wptr 0x120000, zcond:1, [type: 2]
start: 0x140000, len 0x20000, cap 0x20000, wptr 0x140000, zcond:1, [type: 2]
start: 0x160000, len 0x20000, cap 0x20000, wptr 0x160000, zcond:3, [type: 2]
Append write zones[0] one time:
After zap done, the append sector is 0x0
start: 0x0, len 0x20000, cap 0x20000, wptr 0x18, zcond:2, [type: 2]

Append write zones[0] twice:
After zap done, the append sector is 0x18
start: 0x0, len 0x20000, cap 0x20000, wptr 0x30, zcond:2, [type: 2]

Append write zones[1] one time:
After zap done, the append sector is 0x20000
start: 0x20000, len 0x20000, cap 0x20000, wptr 0x20018, zcond:2, [type: 2]

Append write zones[1] twice:
After zap done, the append sector is 0x20018
start: 0x20000, len 0x20000, cap 0x20000, wptr 0x20030, zcond:2, [type: 2]

Reset all:
start: 0x0, len 0x20000, cap 0x20000, wptr 0x0, zcond:1, [type: 2]
start: 0x20000, len 0x20000, cap 0x20000, wptr 0x20000, zcond:1, [type: 2]
start: 0x40000, len 0x20000, cap 0x20000, wptr 0x40000, zcond:1, [type: 2]
start: 0x60000, len 0x20000, cap 0x20000, wptr 0x60000, zcond:1, [type: 2]
start: 0x80000, len 0x20000, cap 0x20000, wptr 0x80000, zcond:1, [type: 2]
start: 0xa0000, len 0x20000, cap 0x20000, wptr 0xa0000, zcond:1, [type: 2]
start: 0xc0000, len 0x20000, cap 0x20000, wptr 0xc0000, zcond:1, [type: 2]
start: 0xe0000, len 0x20000, cap 0x20000, wptr 0xe0000, zcond:1, [type: 2]
start: 0x100000, len 0x20000, cap 0x20000, wptr 0x100000, zcond:1, [type: 2]
start: 0x120000, len 0x20000, cap 0x20000, wptr 0x120000, zcond:1, [type: 2]
start: 0x140000, len 0x20000, cap 0x20000, wptr 0x140000, zcond:1, [type: 2]
start: 0x160000, len 0x20000, cap 0x20000, wptr 0x160000, zcond:1, [type: 2]


case 2: test a sets of ops that works or not
(1) append write (4k, 4k) and then write to full
After zap done, the append sector is 0x0
wrote (4k, 4k):
start: 0x0, len 0x20000, cap 0x20000, wptr 0x10, zcond:2, [type: 2]
After zap done, the append sector is 0x10
wrote to full:
start: 0x0, len 0x20000, cap 0x20000, wptr 0x20000, zcond:14, [type: 2]
Reset zones[0]:
start: 0x0, len 0x20000, cap 0x20000, wptr 0x0, zcond:1, [type: 2]
(2) write in zones[0], zones[3], zones[8], and then reset all
After zap done, the append sector is 0x0
After zap done, the append sector is 0x60000
After zap done, the append sector is 0x100000
wrote three zones:
start: 0x0, len 0x20000, cap 0x20000, wptr 0x10, zcond:2, [type: 2]
start: 0x20000, len 0x20000, cap 0x20000, wptr 0x20000, zcond:1, [type: 2]
start: 0x40000, len 0x20000, cap 0x20000, wptr 0x40000, zcond:1, [type: 2]
start: 0x60000, len 0x20000, cap 0x20000, wptr 0x60010, zcond:2, [type: 2]
start: 0x80000, len 0x20000, cap 0x20000, wptr 0x80000, zcond:1, [type: 2]
start: 0xa0000, len 0x20000, cap 0x20000, wptr 0xa0000, zcond:1, [type: 2]
start: 0xc0000, len 0x20000, cap 0x20000, wptr 0xc0000, zcond:1, [type: 2]
start: 0xe0000, len 0x20000, cap 0x20000, wptr 0xe0000, zcond:1, [type: 2]
start: 0x100000, len 0x20000, cap 0x20000, wptr 0x100010, zcond:2, [type: 2]
start: 0x120000, len 0x20000, cap 0x20000, wptr 0x120000, zcond:1, [type: 2]
start: 0x140000, len 0x20000, cap 0x20000, wptr 0x140000, zcond:1, [type: 2]
start: 0x160000, len 0x20000, cap 0x20000, wptr 0x160000, zcond:1, [type: 2]
Reset all:
start: 0x0, len 0x20000, cap 0x20000, wptr 0x0, zcond:1, [type: 2]
start: 0x20000, len 0x20000, cap 0x20000, wptr 0x20000, zcond:1, [type: 2]
start: 0x40000, len 0x20000, cap 0x20000, wptr 0x40000, zcond:1, [type: 2]
start: 0x60000, len 0x20000, cap 0x20000, wptr 0x60000, zcond:1, [type: 2]
start: 0x80000, len 0x20000, cap 0x20000, wptr 0x80000, zcond:1, [type: 2]
start: 0xa0000, len 0x20000, cap 0x20000, wptr 0xa0000, zcond:1, [type: 2]
start: 0xc0000, len 0x20000, cap 0x20000, wptr 0xc0000, zcond:1, [type: 2]
start: 0xe0000, len 0x20000, cap 0x20000, wptr 0xe0000, zcond:1, [type: 2]
start: 0x100000, len 0x20000, cap 0x20000, wptr 0x100000, zcond:1, [type: 2]
start: 0x120000, len 0x20000, cap 0x20000, wptr 0x120000, zcond:1, [type: 2]
start: 0x140000, len 0x20000, cap 0x20000, wptr 0x140000, zcond:1, [type: 2]
start: 0x160000, len 0x20000, cap 0x20000, wptr 0x160000, zcond:1, [type: 2]
*** done
