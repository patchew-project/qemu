#
# Example yaml for use by any of the scripts in tests/vm.
# Can be provided as an environment variable QEMU_CONFIG
#
target-conf:

    # If any of the below are not provided, we will just use the qemu defaults.

    # Login username (has to be sudo enabled)
    #username: qemu

    # Password is used by root and default login user.
    #password: "qemupass"

    # If one key is provided, both must be provided.
    #ssh_key: /complete/path/of/your/keyfile/id_rsa
    #ssh_pub_key: /complete/path/of/your/keyfile/id_rsa.pub

    cpu: max
    machine: virt,gic_version=3
    memory: 16G

    # The below is an example for how to configure NUMA topology with
    # 4 NUMA nodes and 2 different NUMA distances.
    qemu_args: "-smp cpus=16,sockets=2,cores=8
                -object memory-backend-ram,size=4G,policy=bind,host-nodes=0,id=ram-node0
                -object memory-backend-ram,size=4G,policy=bind,host-nodes=0,id=ram-node1
                -object memory-backend-ram,size=4G,policy=bind,host-nodes=1,id=ram-node2
                -object memory-backend-ram,size=4G,policy=bind,host-nodes=1,id=ram-node3
                -numa node,memdev=ram-node0,cpus=0-3,nodeid=0 -numa node,memdev=ram-node1,cpus=4-7,nodeid=1
                -numa node,memdev=ram-node2,cpus=8-11,nodeid=2 -numa node,memdev=ram-node3,cpus=12-15,nodeid=3
                -numa dist,src=0,dst=1,val=15 -numa dist,src=2,dst=3,val=15
                -numa dist,src=0,dst=2,val=20 -numa dist,src=0,dst=3,val=20
                -numa dist,src=1,dst=2,val=20 -numa dist,src=1,dst=3,val=20"

    # By default we do not set the DNS.
    # You override the defaults by setting the below.
    #dns: 1.234.567.89

    # By default we will use a "block" device, but
    # you can also boot from a "scsi" device.
    # Just keep in mind your scripts might need to change
    # As you will have /dev/sda instead of /dev/vda (for block device)
    #boot_dev_type: "scsi"

    # By default the ssh port is not fixed.
    # A fixed ssh port makes it easier for automated tests.
    #ssh_port: 5555

    # To install a different set of packages, provide a command to issue
    #install_cmds: "apt-get update ; apt-get build-dep -y qemu"

